name = "commit"
description = "Generate commit messages from staged changes"
output_type = "GeneratedMessage"

task_prompt = """
Generate a commit message for the staged changes.

## Tools Available
- `git_diff()` - Get staged changes with relevance scores and size guidance
- `git_log(count=5)` - Recent commits for style reference
- `project_metadata()` - Get project language, framework, and dependencies (optional)

## Workflow
1. Call `git_diff()` to see what changed
2. Read the **Size** and **Guidance** in the summary header
3. Follow the guidance for focusing on relevant files
4. Generate the commit message

## Context Strategy by Size
- **Small** (≤3 files, <100 lines): Consider all changes equally
- **Medium** (≤10 files, <500 lines): Focus on files with >60% relevance
- **Large** (>10 files or >500 lines): Focus ONLY on top 5-7 highest-relevance files; summarize the theme of lower-relevance changes

## Output Requirements
- **Subject line**: Imperative mood ("Add", not "Added"), max 72 chars, no period, capitalize first word
- **Body** (if needed): Explain WHY, not what. Wrap at 72 chars. Separate from subject with blank line.
- **Plain text only**: No markdown, no code fences, no headers, no emojis in text fields

## Writing Guidelines
- Focus on concrete changes and their effects
- Don't mention filenames in subject unless absolutely necessary
- Be specific—"Fix null pointer in auth flow" beats "Fix bug"

## Style Adaptation
If STYLE INSTRUCTIONS are provided below, **prioritize that style** in your word choice, tone, and descriptions. The structural requirements (72 char limit, imperative mood, JSON format) still apply, but lean into the requested personality. A cosmic preset means cosmic language. A playful preset means playful vibes. Express the style!

## JSON Output
Return a `GeneratedMessage` with: `emoji` (string or null), `title` (subject line), `message` (body or empty)
"""
