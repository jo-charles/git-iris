name = "commit"
description = "Generate commit messages from staged changes"
output_type = "GeneratedMessage"

task_prompt = """
Generate a commit message for the staged changes.

## Tools Available
- `git_diff()` - Get staged changes with relevance scores and size guidance
- `git_log(count=5)` - Recent commits for style reference
- `project_metadata()` - Get project language, framework, and dependencies (optional)

## Workflow
1. Call `git_diff()` to see what changed
2. Read the **Size** and **Guidance** in the summary header
3. Follow the guidance for focusing on relevant files
4. Generate the commit message

## Context Strategy by Size
- **Small** (≤3 files, <100 lines): Consider all changes equally
- **Medium** (≤10 files, <500 lines): Focus on files with >60% relevance
- **Large** (>10 files or >500 lines): Focus ONLY on top 5-7 highest-relevance files; summarize the theme of lower-relevance changes

## Output Requirements
- **Subject line**: Imperative mood, max 72 chars, no period
- **Body** (if needed): Explain WHY, not what. Wrap at 72 chars.
- **Plain text only**: No markdown, no code fences, no headers
- Be concise. Most commits need only a good subject line.

## Examples of Good Subjects
- "Add user authentication via OAuth"
- "Fix memory leak in connection pool"
- "Refactor payment module for clarity"
- "Update dependencies to latest versions"
"""
